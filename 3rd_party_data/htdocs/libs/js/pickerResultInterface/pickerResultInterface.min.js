"use strict";function IPickerResult(){function PickerResultException(message){this.message=message,this.name="pickerResultInterfaceException"}function genUUID(){function repl(c){var r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,repl)}var query,vars,getvars,i,pair,locationEx,extId,targetOrigin="",forceSSL="";if(locationEx=location.search+location.hash,null!==locationEx.match(/targetOrigin=([^&]+)/i)&&(targetOrigin=unescape(locationEx.match(/targetOrigin=([^&]+)/i)[1]),console.re?console.re.log("targetOrigin:",targetOrigin):console.log("targetOrigin:",targetOrigin)),null!==locationEx.match(/forceSSL=([^&]+)/i)&&(forceSSL=unescape(locationEx.match(/forceSSL=([^&]+)/i)[1]),console.re?console.re.log("forceSSL:",forceSSL):console.log("forceSSL:",forceSSL)),null!==locationEx.match(/extId=([^&]+)/i)&&(extId=unescape(locationEx.match(/extId=([^&]+)/i)[1]),console.re?console.re.log("forceSSL:",forceSSL):console.log("forceSSL:",forceSSL)),""===targetOrigin)throw console.re?console.re.log("Parameter targetOrigin is not defined!"):console.log("Parameter targetOrigin is not defined!"),new PickerResultException("Parameter targetOrigin is not defined!");for(query=window.location.search.substring(1),vars=query.split("&"),getvars={},i=0;i<vars.length;i+=1)pair=vars[i].split("="),getvars[pair[0]]=pair[1];this.sendResult=function(result,done){var resultString,noPopup=!0,retval=null;if(null===result)throw console.re?console.re.log("Parameter result is null or undefined!"):console.log("Parameter result is null or undefined!"),new PickerResultException("Parameter result is null or undefined!");if("function"!=typeof done&&(noPopup=!1,done=function(){}),result.getvars=getvars,result.content.map(function(c){c.id=c.id||extId||genUUID()}),result.content.map(function(c){"Invalid Date"==new Date(c.visibleTo)&&delete c.visibleTo,"Invalid Date"==new Date(c.visibleFrom)&&delete c.visibleFrom}),"on"==forceSSL&&result.content.map(function(c){c.fragments.map(function(f){f.fragmentURI=f.fragmentURI.replace(/^http:\/\//i,"https://")})}),result.noPopup=noPopup,resultString=JSON.stringify(result),console.re?console.re.log(resultString):console.log(resultString),"sophora://picker"===targetOrigin){if("function"!=typeof sendResultToDeskClient)throw console.re?console.re.log("Page not executed inside Sophora Client."):console.log("Page not executed inside Sophora Client."),new PickerResultException("Page not executed inside Sophora Client.");retval=sendResultToDeskClient(resultString),!1!==done&&done(retval)}else parent.postMessage(resultString,targetOrigin),done()},"function"==typeof pickerready&&pickerready()}var PickerResultInterface;PickerResultInterface instanceof IPickerResult||(PickerResultInterface=new IPickerResult,console.re?console.re.log("PickerResultInterface"):console.log("PickerResultInterface"));
//# sourceMappingURL=pickerResultInterface.min.js.map